const translations = {
  ko: {
    loadingText: {text: "ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."},
    loginTitle: {text: "ë¡œê·¸ì¸ ë˜ëŠ” ê²ŒìŠ¤íŠ¸ í”Œë ˆì´"},
    modalGoogleLoginBtn: {text: "Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸"},
    loginInfo: {html: "ë˜ëŠ” ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì—¬ ê²ŒìŠ¤íŠ¸ë¡œ í”Œë ˆì´í•˜ì„¸ìš”.<br>ë‹‰ë„¤ì„ì€ ë­í‚¹ì— í‘œì‹œë˜ë©° ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},
    loginInfoGoogle: {html: "ì´ì „ì— ì‚¬ìš©í•˜ë˜ ë‹‰ë„¤ì„ì´ ìˆëŠ” ê²½ìš° í•´ë‹¹ ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì—¬ ê³„ì† í”Œë ˆì´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ë‹‰ë„¤ì„ì€ ë­í‚¹ì— í‘œì‹œë˜ë©° ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},
    usernameInput: {placeholder: "ë‹‰ë„¤ì„ ì…ë ¥"},
    usernameSubmit: {text: "ê²ŒìŠ¤íŠ¸ë¡œ ì‹œì‘í•˜ê¸°"},
    mergeTitle: {text: "ì§„í–‰ ìƒí™© ë³‘í•©"},
    mergeMessage: {text: "í˜„ì¬ ë¡œì»¬ ì§„í–‰ ìƒí™©ì„ Google ê³„ì •ê³¼ ë³‘í•©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"},
    mergeConfirmBtn: {text: "ë„¤"},
    mergeCancelBtn: {text: "ì œ ê³„ì •ì´ ì•„ë‹™ë‹ˆë‹¤"},
    overallRankingTitle: {text: "ğŸ† ì „ì²´ ë­í‚¹"},
    overallRankingList: {text: "ë¡œë”© ì¤‘â€¦"},
      startBtn: {text: "ì‹œì‘í•˜ê¸°"},
      tutorialBtn: {text: "íŠœí† ë¦¬ì–¼"},
      manageModulesBtn: {text: "ëª¨ë“ˆ ê´€ë¦¬"},
      copyStatusBtn: {text: "ê³µìœ í•˜ê¸°"},
      googleLoginBtn: {text: "Google ë¡œê·¸ì¸"},
      languageBtn: {text: "í•œì˜ì „í™˜"},
    guestbookTitle: {text: "ğŸ“ ê°œë°œì(ì´í˜„ì¤€)í•œí…Œ ê¸€ ë‚¨ê¸°ê¸°"},
    guestNicknameLabel: {html: "ë‹‰ë„¤ì„: <b id='guestUsername'></b>"},
    guestMessage: {placeholder: "ë‚¨ê¸°ê³  ì‹¶ì€ ë§..."},
    guestSubmitBtn: {text: "ë“±ë¡"},
    coffeeBtn: {text: "â˜• ê°œë°œì(ì´í˜„ì¤€)í•œí…Œ ì»¤í”¼ ì‚¬ì£¼ê¸°"},
    shareTitle: {text: "ğŸ”— ê³µìœ í•  ë‚´ìš©"},
    copyShareBtn: {text: "ë³µì‚¬í•˜ê¸°"},
    closeShareBtn: {text: "ë‹«ê¸°"},
    backToMainFromManagement: {text: "â† ë©”ì¸ìœ¼ë¡œ"},
    moduleManagementTitle: {text: "ğŸ“¦ ëª¨ë“ˆ ê´€ë¦¬"},
    createModuleBtn: {text: "+ ìƒˆ ëª¨ë“ˆ ë§Œë“¤ê¸°"},
    moduleTitle: {text: "ğŸ›  ëª¨ë“ˆ ì œì‘ ëª¨ë“œ"},
    moduleWireStatusInfo: {text: "Ctrl - ë„ì„  ê·¸ë¦¬ê¸°"},
    moduleWireDeleteInfo: {text: "Shift - ë„ì„ /ë¸”ë¡ ì‚­ì œ"},
    moduleDeleteAllInfo: {text: "R - íšŒë¡œ ì´ˆê¸°í™”"},
    saveModuleBtn: {text: "ëª¨ë“ˆ ì €ì¥í•˜ê¸°"},
    moduleInfoTitle: {text: "ëª¨ë“ˆ ì •ë³´ ì…ë ¥"},
    moduleNameInput: {placeholder: "ëª¨ë“ˆ ì´ë¦„ (ì˜ë¬¸/ìˆ«ì, ìµœëŒ€ 8ì)", title:"ì˜ë¬¸ì(Aâ€“Z, aâ€“z)ì™€ ìˆ«ì(0â€“9)ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤."},
    moduleDescInput: {placeholder: "ëª¨ë“ˆ ì„¤ëª… (ì„ íƒ)"},
    confirmSaveModuleBtn: {text: "ì €ì¥í•˜ê¸°"},
    cancelSaveModuleBtn: {text: "ì·¨ì†Œ"},
    "exit-module-mode": {text: "â† ëŒì•„ê°€ê¸°"},
    backToMainFromProblem: {text: "â† ë©”ì¸ìœ¼ë¡œ"},
    problemCreatorTitle: {text: "ğŸ“ ë¬¸ì œ ì¶œì œ"},
    inputLabel: {text: "ì…ë ¥"},
    outputLabel: {text: "ì¶œë ¥"},
    rowLabel: {text: "í–‰"},
    colLabel: {text: "ì—´"},
    updateIOBtn: {text: "ì ìš©"},
    addTestcaseRowBtn: {text: "+ í–‰ ì¶”ê°€"},
    computeOutputsBtn: {text: "ì¶œë ¥ ê³„ì‚°"},
    problemWireStatusInfo: {text: "Ctrl - ë„ì„  ê·¸ë¦¬ê¸°"},
    problemWireDeleteInfo: {text: "Shift - ë„ì„ /ë¸”ë¡ ì‚­ì œ"},
    problemDeleteAllInfo: {text: "R - íšŒë¡œ ì´ˆê¸°í™”"},
    saveProblemBtn: {text: "ë¬¸ì œ ì €ì¥"},
    problemInfoTitle: {text: "ë¬¸ì œ ì •ë³´ ì…ë ¥"},
    problemTitleInput: {placeholder: "ë¬¸ì œ ì œëª©"},
    problemDescInput: {placeholder: "ë¬¸ì œ ì„¤ëª…"},
    confirmSaveProblemBtn: {text: "ì €ì¥í•˜ê¸°"},
    cancelSaveProblemBtn: {text: "ì·¨ì†Œ"},
    chapterTitle: {text: "ğŸ“š ìŠ¤í…Œì´ì§€ ì„ íƒ"},
    backToMainFromChapter: {text: "â† ë©”ì¸ìœ¼ë¡œ"},
    backToMainBtn: {text: "â† ë©”ì¸ìœ¼ë¡œ"},
    backToChapterFromUserProblems: {text: "â† ì±•í„°ë¡œ"},
    userProblemsTitle: {text: "ğŸ“ ì‚¬ìš©ì ë¬¸ì œ"},
    openProblemCreatorBtn: {text: "ë¬¸ì œ ë§Œë“¤ê¸°"},
    rankingTitle: {text: "ğŸ† ë­í‚¹"},
    hintTitle: {text: "ğŸ’¡ íŒíŠ¸"},
    hintLabel: {text: "íŒíŠ¸"},
    hintReady: {text: "ë‹¤ìŒ íŒíŠ¸ë¥¼ ë°”ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."},
    hintCountdown: {text: "ë‹¤ìŒ íŒíŠ¸ê¹Œì§€ {time}"},
    noHints: {text: "íŒíŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤."},
    startStageFirst: {text: "ë¨¼ì € ìŠ¤í…Œì´ì§€ë¥¼ ì‹œì‘í•˜ì„¸ìš”."},
    adHintBtn: {text: "ê´‘ê³  ë³´ê³  íŒíŠ¸ ì–»ê¸°"},
    closeHintBtn: {text: "ë‹«ê¸°"},
    closeHintMessageBtn: {text: "ë‹«ê¸°"},
    gradeButton: {text: "ì±„ì í•˜ê¸°"},
    wireStatusInfo: {text: "Ctrl - ë„ì„  ê·¸ë¦¬ê¸°"},
    wireDeleteInfo: {text: "Shift - ë„ì„ /ë¸”ë¡ ì‚­ì œ"},
    DeleteAllInfo: {text: "R - íšŒë¡œ ì´ˆê¸°í™”"},
    returnToEditBtn: {text: "ğŸ›  í¸ì§‘ìœ¼ë¡œ ëŒì•„ê°€ê¸°"},
    prevStageBtnMenu: {text: "â† ì´ì „ ìŠ¤í…Œì´ì§€"},
    saveCircuitBtn: {text: "ğŸ’¾ íšŒë¡œ ì €ì¥"},
    viewSavedBtn: {text: "ğŸ’¾ ì €ì¥ëœ íšŒë¡œ ë³´ê¸°"},
    viewRankingBtn: {text: "ğŸ† ë­í‚¹ ë³´ê¸°"},
    showIntroBtn: {text: "â„¹ï¸ ìŠ¤í…Œì´ì§€ ì•ˆë‚´"},
    hintBtn: {text: "ğŸ’¡ íŒíŠ¸"},
    backToLevelsBtn: {text: "â† ë ˆë²¨ ì„ íƒìœ¼ë¡œ"},
    nextStageBtnMenu: {text: "ë‹¤ìŒ ìŠ¤í…Œì´ì§€ â†’"},
    tutPrevBtn: {text: "ì´ì „"},
    tutNextBtn: {text: "ë‹¤ìŒ"},
    tutFinishBtn: {text: "íŠœí† ë¦¬ì–¼ ë§ˆì¹˜ê¸°"},
    tutCloseBtn: {text: "ë‹«ê¸°"},
    savedListTitle: {text: "ğŸ’¾ ì €ì¥ëœ íšŒë¡œ ëª©ë¡"},
    closeSavedModal: {text: "ë‹«ê¸°"},
    gifLoadingText: {text: "GIF ìƒì„±ì¤‘..."},
    savingCircuit: {text: "íšŒë¡œ ì €ì¥ ì¤‘..."},
    circuitSaved: {text: "íšŒë¡œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!"},
    savedShareBtn: {text: "ê³µìœ í•˜ê¸°"},
    savedNextBtn: {text: "ê³„ì†"},
    problemListTitle: {text: "ğŸ“‚ ì €ì¥ëœ ë¬¸ì œ"},
    closeProblemListModal: {text: "ë‹«ê¸°"},
    clearedTitle: {html: "ìŠ¤í…Œì´ì§€ <span id='clearedStageNumber'></span> í´ë¦¬ì–´!"},
    prevStageBtn: {text: "ì´ì „ ìŠ¤í…Œì´ì§€"},
    nextStageBtn: {text: "ë‹¤ìŒ ìŠ¤í…Œì´ì§€"},
    startLevelBtn: {text: "ì‹œì‘í•˜ê¸°"},
    stageTutBtn: {text: "ì‹œì‘í•˜ê¸°"},
    loadBtn: {text: "ë¶ˆëŸ¬ì˜¤ê¸°"},
    deleteBtn: {text: "ì‚­ì œ"},
    logoutBtn: {text: "ë¡œê·¸ì•„ì›ƒ"},
    outputMissingAlert: {text: "âŒ ë‹¤ìŒ ì¶œë ¥ ë¸”ë¡ì´ ë°°ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤: {list}"},
    loginFailed: {text: "ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì½”ë“œ: {code}, ë©”ì‹œì§€: {message}"},
    noModules: {text: "ì €ì¥ëœ ëª¨ë“ˆì´ ì—†ìŠµë‹ˆë‹¤."},
    noCircuits: {text: "ì €ì¥ëœ íšŒë¡œê°€ ì—†ìŠµë‹ˆë‹¤."},
    noProblems: {text: "ì €ì¥ëœ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤."},
    noUserProblems: {text: "ë“±ë¡ëœ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤."},
    confirmDeleteModule: {text: "ì •ë§ '{module}' ëª¨ë“ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"},
    confirmDelete: {text: "ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"},
    loadFailedNoData: {text: "ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"},
    moduleLoadFailed: {text: "âš ï¸ ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"},
    loadFailed: {text: "ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨"},
    deleteFailed: {text: "ì‚­ì œ ì‹¤íŒ¨: {error}"},
    confirmDeleteAll: {text: "âš ï¸ ëª¨ë“  ë¸”ë¡ê³¼ ë°°ì„ ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"},
    computeOutputsFirst: {text: "ì¶œë ¥ ê³„ì‚°ì„ ë¨¼ì € ì‹¤í–‰í•˜ì„¸ìš”."},
    problemSaved: {text: "ë¬¸ì œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤."},
    saveFailed: {text: "ì €ì¥ ì‹¤íŒ¨: {error}"},
    thInput: {text: "ì…ë ¥"},
    thExpected: {text: "ì˜ˆìƒ ì¶œë ¥"},
    thActual: {text: "ì‹¤ì œ ì¶œë ¥"},
    thResult: {text: "ê²°ê³¼"},
    thRank: {text: "ìˆœìœ„"},
    thNickname: {text: "ë‹‰ë„¤ì„"},
    thStage: {text: "ìŠ¤í…Œì´ì§€"},
    thBlocks: {text: "ë¸”ëŸ­"},
    thWires: {text: "ë„ì„ "},
    thHintUsed: {text: "íŒíŠ¸ ì‚¬ìš©"},
    thTime: {text: "ì‹œê°„"},
    thTitle: {text: "ì œëª©"},
    thGrid: {text: "ê·¸ë¦¬ë“œ"},
    thNotes: {text: "ë¹„ê³ "},
    thCreator: {text: "ì œì‘ì"},
    thCreatedAt: {text: "ì œì‘ì¼"},
    thSolved: {text: "í•´ê²° ìˆ˜"},
    thLikes: {text: "ì¢‹ì•„ìš”"}
  },
  en: {
    loadingText: {text: "Loading data..."},
    loginTitle: {text: "Login or play as guest"},
    modalGoogleLoginBtn: {text: "Sign in with Google"},
    loginInfo: {html: "Or enter a nickname to play as a guest.<br>The nickname appears in the ranking and cannot be changed."},
    loginInfoGoogle: {html: "If you previously used a nickname, enter it to continue playing.<br>The nickname appears in the ranking and cannot be changed."},
    usernameInput: {placeholder: "Enter nickname"},
    usernameSubmit: {text: "Start as guest"},
    mergeTitle: {text: "Merge Progress"},
    mergeMessage: {text: "Merge local progress with your Google account?"},
    mergeConfirmBtn: {text: "Yes"},
    mergeCancelBtn: {text: "Not my account"},
    overallRankingTitle: {text: "ğŸ† Global Ranking"},
    overallRankingList: {text: "Loading..."},
    startBtn: {text: "Start"},
    tutorialBtn: {text: "Tutorial"},
    manageModulesBtn: {text: "Manage Modules"},
    copyStatusBtn: {text: "Share"},
    googleLoginBtn: {text: "Google Login"},
    languageBtn: {text: "Change Language"},
    guestbookTitle: {text: "ğŸ“ Leave a message for the developer (Hyeonjun Lee)"},
    guestNicknameLabel: {html: "Nickname: <b id='guestUsername'></b>"},
    guestMessage: {placeholder: "Message..."},
    guestSubmitBtn: {text: "Submit"},
    coffeeBtn: {text: "â˜• Buy the developer (Hyeonjun Lee) a coffee"},
    shareTitle: {text: "ğŸ”— Shareable content"},
    copyShareBtn: {text: "Copy"},
    closeShareBtn: {text: "Close"},
    backToMainFromManagement: {text: "â† Back to Main"},
    moduleManagementTitle: {text: "ğŸ“¦ Module Management"},
    createModuleBtn: {text: "+ Create Module"},
    moduleTitle: {text: "ğŸ›  Module Builder Mode"},
    moduleWireStatusInfo: {text: "Ctrl - Draw wire"},
    moduleWireDeleteInfo: {text: "Shift - Delete wire/block"},
    moduleDeleteAllInfo: {text: "R - Reset circuit"},
    saveModuleBtn: {text: "Save Module"},
    moduleInfoTitle: {text: "Enter Module Info"},
    moduleNameInput: {placeholder: "Module name (alphanumeric, max 8)", title:"Only Aâ€“Z, aâ€“z, 0â€“9 allowed."},
    moduleDescInput: {placeholder: "Module description (optional)"},
    confirmSaveModuleBtn: {text: "Save"},
    cancelSaveModuleBtn: {text: "Cancel"},
    "exit-module-mode": {text: "â† Back"},
    backToMainFromProblem: {text: "â† Back to Main"},
    problemCreatorTitle: {text: "ğŸ“ Problem Creator"},
    inputLabel: {text: "Inputs"},
    outputLabel: {text: "Outputs"},
    rowLabel: {text: "Rows"},
    colLabel: {text: "Cols"},
    updateIOBtn: {text: "Apply"},
    addTestcaseRowBtn: {text: "+ Add row"},
    computeOutputsBtn: {text: "Compute outputs"},
    problemWireStatusInfo: {text: "Ctrl - Draw wire"},
    problemWireDeleteInfo: {text: "Shift - Delete wire/block"},
    problemDeleteAllInfo: {text: "R - Reset circuit"},
    saveProblemBtn: {text: "Save Problem"},
    problemInfoTitle: {text: "Enter Problem Info"},
    problemTitleInput: {placeholder: "Problem title"},
    problemDescInput: {placeholder: "Problem description"},
    confirmSaveProblemBtn: {text: "Save"},
    cancelSaveProblemBtn: {text: "Cancel"},
    chapterTitle: {text: "ğŸ“š Select Stage"},
    backToMainFromChapter: {text: "â† Back to Main"},
    backToMainBtn: {text: "â† Back to Main"},
    backToChapterFromUserProblems: {text: "â† Back to Chapters"},
    userProblemsTitle: {text: "ğŸ“ User Problems"},
    openProblemCreatorBtn: {text: "Create Problem"},
    rankingTitle: {text: "ğŸ† Ranking"},
    hintTitle: {text: "ğŸ’¡ Hint"},
    hintLabel: {text: "Hint"},
    hintReady: {text: "You can view the next hint now."},
    hintCountdown: {text: "Time until next hint {time}"},
    noHints: {text: "No hints available."},
    startStageFirst: {text: "Start a stage first."},
    adHintBtn: {text: "Watch ad to get hint"},
    closeHintBtn: {text: "Close"},
    closeHintMessageBtn: {text: "Close"},
    gradeButton: {text: "Grade"},
    wireStatusInfo: {text: "Ctrl - Draw wire"},
    wireDeleteInfo: {text: "Shift - Delete wire/block"},
    DeleteAllInfo: {text: "R - Reset circuit"},
    returnToEditBtn: {text: "ğŸ›  Back to Edit"},
    prevStageBtnMenu: {text: "â† Previous Stage"},
    saveCircuitBtn: {text: "ğŸ’¾ Save Circuit"},
    viewSavedBtn: {text: "ğŸ’¾ View Saved Circuits"},
    viewRankingBtn: {text: "ğŸ† View Ranking"},
    showIntroBtn: {text: "â„¹ï¸ Stage Info"},
    hintBtn: {text: "ğŸ’¡ Hint"},
    backToLevelsBtn: {text: "â† Back to Level Select"},
    nextStageBtnMenu: {text: "Next Stage â†’"},
    tutPrevBtn: {text: "Prev"},
    tutNextBtn: {text: "Next"},
    tutFinishBtn: {text: "Finish Tutorial"},
    tutCloseBtn: {text: "Close"},
    savedListTitle: {text: "ğŸ’¾ Saved Circuits"},
    closeSavedModal: {text: "Close"},
    gifLoadingText: {text: "Generating GIF..."},
    savingCircuit: {text: "Saving circuit..."},
    circuitSaved: {text: "Circuit saved!"},
    savedShareBtn: {text: "Share"},
    savedNextBtn: {text: "Next"},
    problemListTitle: {text: "ğŸ“‚ Saved Problems"},
    closeProblemListModal: {text: "Close"},
    clearedTitle: {html: "Stage <span id='clearedStageNumber'></span> Cleared!"},
    prevStageBtn: {text: "Previous Stage"},
    nextStageBtn: {text: "Next Stage"},
    startLevelBtn: {text: "Start"},
    stageTutBtn: {text: "Start"},
    loadBtn: {text: "Load"},
    deleteBtn: {text: "Delete"},
    logoutBtn: {text: "Logout"},
    outputMissingAlert: {text: "âŒ Missing output blocks: {list}"},
    loginFailed: {text: "Login failed. Code: {code}, Message: {message}"},
    noModules: {text: "No saved modules."},
    noCircuits: {text: "No saved circuits."},
    noProblems: {text: "No saved problems."},
    noUserProblems: {text: "No problems available."},
    confirmDeleteModule: {text: "Are you sure you want to delete module '{module}'?"},
    confirmDelete: {text: "Are you sure you want to delete?"},
    loadFailedNoData: {text: "Load failed: No data"},
    moduleLoadFailed: {text: "âš ï¸ Failed to load module: No data"},
    loadFailed: {text: "Load failed"},
    deleteFailed: {text: "Delete failed: {error}"},
    confirmDeleteAll: {text: "âš ï¸ Delete all blocks and wires?"},
    computeOutputsFirst: {text: "Please compute outputs first."},
    problemSaved: {text: "Problem saved."},
    saveFailed: {text: "Save failed: {error}"},
    thInput: {text: "Input"},
    thExpected: {text: "Expected"},
    thActual: {text: "Actual"},
    thResult: {text: "Result"},
    thRank: {text: "Rank"},
    thNickname: {text: "Nickname"},
    thStage: {text: "Stage"},
    thBlocks: {text: "Blocks"},
    thWires: {text: "Wires"},
    thHintUsed: {text: "Hints"},
    thTime: {text: "Time"},
    thTitle: {text: "Title"},
    thGrid: {text: "Grid"},
    thNotes: {text: "Notes"},
    thCreator: {text: "Creator"},
    thCreatedAt: {text: "Created"},
    thSolved: {text: "Solved"},
    thLikes: {text: "Likes"}
  }
};

let currentLang = localStorage.getItem('lang') || (navigator.language && navigator.language.startsWith('ko') ? 'ko' : 'en');

function applyTranslations() {
  const langMap = translations[currentLang];
  Object.keys(langMap).forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    const {text, html, placeholder, title} = langMap[id];
    if (text !== undefined) el.textContent = text;
    if (html !== undefined) el.innerHTML = html;
    if (placeholder !== undefined) el.setAttribute('placeholder', placeholder);
    if (title !== undefined) el.setAttribute('title', title);
  });
}

function setLanguage(lang) {
  currentLang = lang;
  localStorage.setItem('lang', lang);
  location.reload();
}

document.addEventListener('DOMContentLoaded', () => {
  applyTranslations();
  const langBtn = document.getElementById('languageBtn');
  if (langBtn) {
    langBtn.addEventListener('click', () => {
      setLanguage(currentLang === 'ko' ? 'en' : 'ko');
    });
  }
});

window.currentLang = currentLang;
window.t = function(id) {
  const entry = translations[currentLang][id] || translations['en'][id];
  return entry && (entry.text || entry.html) || id;
};
window.setLanguage = setLanguage;
