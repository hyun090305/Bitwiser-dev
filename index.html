<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Bitwiser</title>
    <link rel="stylesheet" href="style.v1.4.css">
    <style>
    html {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  </style>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap"
      rel="stylesheet" />
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffffff">
    <meta name="description" content="논리 회로 퍼즐 게임 - 블록을 조합해 회로를 구현하세요!">
    <meta property="og:title" content="Bitwiser">
    <meta property="og:description" content="논리 회로 퍼즐 게임 - 블록을 조합해 회로를 구현하세요!">
    <meta property="og:image" content="https://hyun090305.github.io/Bitwiser/assets/icon-512.png">
  </head>
  <body>
    <canvas id="backgroundCanvas"></canvas>
    <div id="loadingScreen">
      <div class="loader"></div>
      <p id="loadingText">데이터 불러오는 중...</p>
    </div>
    <div id="mergeModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h2 id="mergeTitle">진행 상황 병합</h2>
        <div id="mergeDetails">
          <p id="mergeMessage">현재 로컬 진행 상황을 Google 계정과 병합하시겠습니까?</p>
        </div>
        <div class="modal-buttons">
          <button id="mergeConfirmBtn">네</button>
          <button id="mergeCancelBtn">제 계정이 아닙니다</button>
        </div>
      </div>
    </div>
    <div id="shareModal" class="modal" style="display:none;">
          <div class="modal-content">
            <h3 id="shareTitle">🔗 공유할 내용</h3>
            <textarea id="shareText" readonly rows="20"
              style="width:100%;"></textarea>
            <div style="margin-top:1rem; text-align:right;">
              <button id="copyShareBtn">복사하기</button>
              <button id="closeShareBtn">닫기</button>
            </div>
          </div>
        </div>
    <div id="orientationModal" class="modal" style="display:none;">
      <div class="modal-content">
        <p>⚠️Bitwiser는 가로 모드를 권장합니다</p>
        <p>Tip: [홈 화면에 추가 -> 설치]를 통해 Bitwiser 앱을 설치할 수 있어요!</p>
        <div class="modal-buttons">
          <button id="closeOrientationBtn">닫기</button>
        </div>
      </div>
    </div>
    <div id="settingsModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h3 id="settingsTitle"></h3>
        <label>
          <input type="checkbox" id="autoSaveCheckbox">
          <span id="autoSaveLabel"></span>
        </label>
        <div class="modal-buttons">
          <button id="settingsCloseBtn"></button>
        </div>
      </div>
    </div>
    <!-- 메인 화면 -->
    <div class="container" id="firstScreen">
      <div id="overallRankingArea" class="tab-screen">
        <h3 id="overallRankingTitle">🏆 전체 랭킹</h3>
        <div id="overallRankingList">로딩 중…</div>
      </div>
      <div id="mainArea" class="tab-screen active">
        <div id="mainScreen">
        <h1>🧠 Bitwiser</h1>
        <p class="tagline">Play bitwise. Become bit wiser.</p>
        <div class="button-row">
          <button id="labBtn" class="main-button icon-button" type="button" aria-label="실험실" title="실험실">🔬</button>
          <button id="chapterNavBtn" class="main-button icon-button" type="button" aria-label="스테이지 선택" title="스테이지 선택">▶</button>
          <button id="userProblemsBtn" class="main-button icon-button" type="button" aria-label="사용자 문제" title="사용자 문제">⚒️</button>
        </div>
        <div class="button-row">
          <button id="tutorialBtn" class="main-button">튜토리얼</button>
          <button id="copyStatusBtn" class="main-button">공유하기</button>
        </div>
        </div>
        <div id="loginArea">
          <h2 id="loginUsername"></h2>
          <div id="rankSection" style="display:none;">
            <table id="rankTable">
              <tr>
                <td class="rank-cell">
                  <p id="loginRankOverallLabel" class="rank-label"></p>
                  <p id="overallRank" class="rank-value">#-</p>
                </td>
                <td class="rank-cell">
                  <p id="loginRankClearedLabel" class="rank-label"></p>
                  <p id="clearedCount" class="rank-value">0</p>
                </td>
              </tr>
            </table>
          </div>
          <div class="button-row">
            <button id="googleLoginBtn" class="main-button"></button>
            <button id="settingsBtn" class="main-button"></button>
          </div>
          <p id="loginGuestPrompt" class="tagline"></p>
          <div class="button-row">
            <button id="languageBtn" class="main-button"></button>
          </div>
        </div>
      </div>
      <div id="guestbookArea" class="tab-screen">
        <div id="guestbookForm">
          <h3 id="guestbookTitle">📝 개발자(이현준)한테 글 남기기</h3>
          <p class="info-text" id="guestNicknameLabel">닉네임: <b id="guestUsername"></b></p>
          <br>
          <textarea id="guestMessage" rows="4"
            placeholder="남기고 싶은 말..."></textarea>
          <br>
          <button id="guestSubmitBtn" onclick="submitGuestEntry()">등록</button>
        </div>
        <div id="guestbookListArea">
          <div id="guestbookList"></div>
          <button id="coffeeBtn">
            ☕ 개발자(이현준)한테 커피 사주기
          </button>
        </div>
      </div>
      <div id="mobileNav" role="tablist">
        <div class="nav-item" data-target="overallRankingArea" role="tab" aria-selected="false">
          <img src="assets/trophy-icon.png" alt="랭킹" class="nav-icon">
          <span class="nav-text">랭킹</span>
        </div>
        <div class="nav-item active" data-target="mainArea" role="tab" aria-selected="true">
          <img src="assets/home-icon.png" alt="메인" class="nav-icon">
          <span class="nav-text">메인</span>
        </div>
        <div class="nav-item" data-target="guestbookArea" role="tab" aria-selected="false">
          <img src="assets/message-icon.png" alt="방명록" class="nav-icon">
          <span class="nav-text">방명록</span>
        </div>
      </div>
    </div>

    <div id="problem-screen" class="screen" style="display:none;">
      <div class="panel-overlay problem-screen-panel">
        <div id="problemCanvasContainer" style="position:relative;margin:auto;">
          <canvas id="problemBgCanvas" style="position:relative;"></canvas>
          <canvas id="problemContentCanvas"></canvas>
          <canvas id="problemOverlayCanvas"></canvas>
        </div>
        <div class="rightPanel" id="problemRightPanel" style="display:flex; flex-direction:column; gap:0.5rem; margin: auto 0;">
          <h1 id="problemCreatorTitle">📝 문제 출제</h1>
          <div style="display:flex; justify-content:space-between; gap:1rem;">
            <div style="display:flex; flex-direction:column; align-items:center; gap:0.5rem; margin:auto;">
              <div style="text-align:center; line-height:1.6; margin-top:0.5rem;">
                <button id="problemWireStatusInfo" class="toggle-key" style="color: darkgreen; font-weight:bold;">Ctrl / Cmd - 도선 그리기</button>
                <button id="problemWireDeleteInfo" class="toggle-key" style="color: crimson; font-weight:bold;">Shift - 도선/블록 삭제</button>
                <button id="problemDeleteAllInfo" class="toggle-key" style="color: crimson; font-weight:bold;">R - 회로 초기화</button>
              </div>
              <div id="problemMoveButtonWrapper">
                <div id="problemMoveButtons">
                  <button id="problemMoveUpBtn">↑</button>
                  <button id="problemMoveLeftBtn">←</button>
                  <button id="problemMoveDownBtn">↓</button>
                  <button id="problemMoveRightBtn">→</button>
                </div>
              </div>
              <div id="problemUsageSection" style="width:100%;">
            <table id="problemUsageTable">
              <tr>
                <td class="rank-cell">
                  <p id="problemUsedBlocksLabel" class="rank-label"></p>
                  <p id="problemUsedBlocks" class="rank-value">0</p>
                </td>
                <td class="rank-cell">
                  <p id="problemUsedWiresLabel" class="rank-label"></p>
                  <p id="problemUsedWires" class="rank-value">0</p>
                </td>
              </tr>
            </table>
          </div>
            </div>
            <div style="display:flex; flex-direction:column; gap:0.5rem; margin:auto;">
              <div>
                <label id="inputLabel" for="inputCount">입력</label>
                <input id="inputCount" type="number" min="1" max="6" value="1" style="width:40px;">
                <label id="outputLabel" for="outputCount">출력</label>
                <input id="outputCount" type="number" min="1" max="6" value="1" style="width:40px;">
                <br>
                <label id="rowLabel" for="gridRows">행</label>
                <input id="gridRows" type="number" min="1" max="15" value="6" style="width:40px;">
                <label id="colLabel" for="gridCols">열</label>
                <input id="gridCols" type="number" min="1" max="15" value="6" style="width:40px;">
                <button id="updateIOBtn">적용</button>
              </div>
              <div id="testcaseContainer" style="margin: 0 auto;">
                <table id="testcaseTable" border="1" style="font-size:0.9rem; text-align:center;">
                  <thead></thead>
                  <tbody></tbody>
                </table>
              </div>
              <button id="computeOutputsBtn">출력 계산</button>
            </div>
          </div>
          <div style="margin-top:0.5rem; text-align:center;">
            <button id="backToMainFromProblem" class="btn-back">← 메인으로</button>
            <button id="saveProblemBtn" class="btn-back" style="margin-left:20px;">문제 저장</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 문제 저장 모달 -->
    <div id="problemSaveModal" class="modal" style="display:none;">
      <div class="modal-backdrop"></div>
      <div class="modal-dialog">
        <h3 id="problemInfoTitle">문제 정보 입력</h3>
        <input id="problemTitleInput" type="text" placeholder="문제 제목" class="modal-input" />
        <textarea id="problemDescInput" rows="3" placeholder="문제 설명" class="modal-textarea"></textarea>
        <div class="difficulty-row">
          <span id="problemDifficultyLabel">난이도</span>
          <div id="problemDifficultyStars" class="difficulty-stars" role="radiogroup" aria-labelledby="problemDifficultyLabel">
            <button type="button" class="difficulty-star" data-value="1" role="radio" aria-checked="false" aria-label="난이도 1">★</button>
            <button type="button" class="difficulty-star" data-value="2" role="radio" aria-checked="false" aria-label="난이도 2">★</button>
            <button type="button" class="difficulty-star" data-value="3" role="radio" aria-checked="false" aria-label="난이도 3">★</button>
            <button type="button" class="difficulty-star" data-value="4" role="radio" aria-checked="false" aria-label="난이도 4">★</button>
            <button type="button" class="difficulty-star" data-value="5" role="radio" aria-checked="false" aria-label="난이도 5">★</button>
          </div>
          <span id="problemDifficultyValueLabel" class="difficulty-value"></span>
          <input type="hidden" id="problemDifficultyValue" value="3" />
        </div>
        <label>
          <input type="checkbox" id="fixIOCheck">
          <span id="fixIOCheckLabel">IN/OUT 위치 고정</span>
        </label>
        <div class="modal-buttons">
          <button id="confirmSaveProblemBtn" class="btn-primary">저장하기</button>
          <button id="cancelSaveProblemBtn" class="btn-secondary">취소</button>
        </div>
      </div>
    </div>

    <div id="chapterStageScreen" style="display:none; padding: 2rem;">
      <h1 id="chapterTitle">📚 스테이지 선택</h1>
      <div id="chapterStageContainer">
        <div id="chapterList" class="chapter-list"></div>
        <div id="stagePanel">
          <div id="stageList" class="stage-list"></div>
        </div>
      </div>
      <button id="backToMainFromChapter" class="btn-back">← 메인으로</button>
      <button id="toggleChapterList" class="btn-toggle" style='display: none'>☰</button>
    </div>
    <div id="user-problems-screen" class="screen" style="display:none;">
      <div class="panel-overlay user-problems-panel">
        <h1 id="userProblemsTitle">📝 사용자 문제</h1>
        <div class="user-problems-content">
          <div class="user-problems-sidebar">
            <div class="user-problems-toolbar" role="region" aria-labelledby="userProblemsTitle">
              <div class="user-problems-toolbar-row">
                <label id="userProblemSearchLabel" class="sr-only" for="userProblemSearch">검색</label>
                <div class="user-problems-search">
                  <span aria-hidden="true">🔍</span>
                  <input id="userProblemSearch" type="search" placeholder="제목 또는 from:제작자" autocomplete="off" spellcheck="false" />
                </div>
                <div class="user-problems-sort">
                  <label id="userProblemSortLabel" for="userProblemSort">정렬</label>
                  <select id="userProblemSort" aria-labelledby="userProblemSortLabel">
                    <option id="userProblemSortLatestOption" value="latest">최신순</option>
                    <option id="userProblemSortPopularOption" value="popular">인기순</option>
                    <option id="userProblemSortSolvedOption" value="solved">해결순</option>
                    <option id="userProblemSortDifficultyOption" value="difficulty">난이도순</option>
                    <option id="userProblemSortNameOption" value="name">이름순</option>
                  </select>
                </div>
              </div>
              <p id="userProblemSearchHelp" class="user-problems-search-help">예: XOR, from:garden</p>
              <div class="user-problems-filter-row" role="group" aria-label="사용자 문제 필터">
                <button type="button" class="user-problem-filter-toggle" data-user-problem-toggle="onlyMine" aria-pressed="false">
                  🧑‍💻 <span id="userProblemFilterMine">나의 문제</span>
                </button>
                <button type="button" class="user-problem-filter-toggle" data-user-problem-toggle="onlyUnsolved" aria-pressed="false">
                  🧩 <span id="userProblemFilterUnsolved">미해결</span>
                </button>
                <button type="button" class="user-problem-filter-toggle" data-user-problem-toggle="onlyPopular" aria-pressed="false">
                  ♥ <span id="userProblemFilterPopular">인기</span>
                </button>
                <div class="user-problem-difficulty-group" role="group" aria-label="난이도">
                  <button
                    type="button"
                    class="user-problem-filter-toggle user-problem-difficulty-toggle"
                    data-user-problem-difficulty="1"
                    aria-pressed="true"
                  >
                    ⭐ 1
                  </button>
                  <button
                    type="button"
                    class="user-problem-filter-toggle user-problem-difficulty-toggle"
                    data-user-problem-difficulty="2"
                    aria-pressed="true"
                  >
                    ⭐⭐ 2
                  </button>
                  <button
                    type="button"
                    class="user-problem-filter-toggle user-problem-difficulty-toggle"
                    data-user-problem-difficulty="3"
                    aria-pressed="true"
                  >
                    ⭐⭐⭐ 3
                  </button>
                  <button
                    type="button"
                    class="user-problem-filter-toggle user-problem-difficulty-toggle"
                    data-user-problem-difficulty="4"
                    aria-pressed="true"
                  >
                    ⭐⭐⭐⭐ 4
                  </button>
                  <button
                    type="button"
                    class="user-problem-filter-toggle user-problem-difficulty-toggle"
                    data-user-problem-difficulty="5"
                    aria-pressed="true"
                  >
                    ⭐⭐⭐⭐⭐ 5
                  </button>
                </div>
              </div>
              <div id="userProblemResultSummary" class="user-problem-result-summary"></div>
            </div>
            <div class="user-problems-actions">
              <button id="openProblemCreatorBtn" class="btn-primary">문제 만들기</button>
              <button id="backToChapterFromUserProblems" class="btn-back user-problems-back">← 메인으로</button>
            </div>
          </div>
          <div class="user-problems-list-container">
            <ul id="userProblemList" class="problem-list"></ul>
          </div>
        </div>
      </div>
    </div>
    <div id="rankingModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h2 id="rankingTitle">🏆 랭킹</h2>
        <div id="rankingList"></div>
      </div>
    </div>
    <div id="hintModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h2 id="hintTitle">💡 힌트</h2>
        <div id="hintButtons" class="modal-buttons" style="flex-wrap:wrap; margin-bottom:1rem; justify-content:center;"></div>
        <div id="hintTimerContainer" class="modal-buttons" style="justify-content:center; margin-bottom:1rem;">
          <span id="nextHintTimer"></span>
          <button id="adHintBtn">광고 보고 힌트 얻기</button>
        </div>
        <div class="modal-buttons">
          <button id="closeHintBtn">닫기</button>
        </div>
      </div>
    </div>
    <div id="hintMessageModal" class="modal" style="display:none;">
      <div class="modal-content">
        <div id="hintMessage" style="margin-bottom:1rem;"></div>
        <div class="modal-buttons">
          <button id="closeHintMessageBtn">닫기</button>
        </div>
      </div>
    </div>
    <!-- 게임 화면 -->
    <div id="gameScreen" style="display:none">
      <div id="gameArea">

        <!-- 전체 게임 영역: 좌측 메뉴 + 중앙 그리드 + 우측 안내 -->
        <div id="gameLayout">

        <!-- div id="blockPanel" style="display:none;"></div -->
        <div id="canvasContainer" style="position: relative;">
          <canvas id="bgCanvas" style="position: relative;"></canvas>
          <canvas id="contentCanvas"></canvas>
          <canvas id="overlayCanvas"></canvas>
          <div id="gridOverlay"></div>
        </div>

        <!-- 우측: 시뮬레이트 + 안내 + 삭제 -->
        <div class="rightPanel" id="rightPanel"
          style="display: flex; flex-direction: column; align-items: center; gap: 1rem;">
          <h1 id="gameTitle" title="ℹ️ 스테이지 안내">🧠 Bitwiser</h1>
          <button id="gradeButton" class="main-button">채점하기</button>
          <div style="text-align: center; line-height: 1.6;">
            <button id="wireStatusInfo" class="toggle-key"
              style="color: darkgreen; font-weight: bold;">
              Ctrl / Cmd - 도선 그리기
            </button>
            <button id="wireDeleteInfo" class="toggle-key"
              style="color: crimson; font-weight: bold; ">
              Shift - 도선/블록 삭제
            </button>
            <button id="DeleteAllInfo" class="toggle-key"
              style="color: crimson; font-weight: bold; ">
              R - 회로 초기화
            </button>
          </div>
          <div id="moveButtonWrapper">
            <div id="moveButtons">
              <button id="moveUpBtn">↑</button>
              <button id="moveLeftBtn">←</button>
              <button id="moveDownBtn">↓</button>
              <button id="moveRightBtn">→</button>
            </div>
          </div>
          <div id="usageSection" style="width:100%;">
            <table id="usageTable">
              <tr>
                <td class="rank-cell">
                  <p id="usedBlocksLabel" class="rank-label"></p>
                  <p id="usedBlocks" class="rank-value">0</p>
                </td>
                <td class="rank-cell">
                  <p id="usedWiresLabel" class="rank-label"></p>
                  <p id="usedWires" class="rank-value">0</p>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div id="gradingArea" style="display:none">
          <button id="returnToEditBtn">🛠 편집으로 돌아가기</button>
        </div>
      </div>
      <div id="circuitError">회로에 오류가 존재합니다</div>
      <div id="labPanels" class="lab-overlay-panels" style="display:none" aria-hidden="true">
        <div class="lab-panel lab-info-panel">
          <div class="lab-panel-header">
            <h2 class="lab-panel-title">🔬 실험실</h2>
            <button id="exitLabBtn" class="lab-close-btn" type="button">← 메인으로</button>
          </div>
          <p class="lab-panel-text">격자 위에서 자유롭게 회로를 실험해 보세요.</p>
        </div>
        <div class="lab-panel lab-shortcuts-panel">
          <h3 class="lab-panel-title">⌨️ 단축키</h3>
          <ul class="lab-shortcuts-list">
            <li><kbd>Ctrl</kbd> / <kbd>Cmd</kbd> - 도선 그리기</li>
            <li><kbd>Shift</kbd> - 도선·블록 삭제</li>
            <li><kbd>R</kbd> - 회로 초기화</li>
          </ul>
        </div>
      </div>
      </div>
      <!-- 메뉴바 -->
      <div id="menuBar">
        <button id="menuToggleBtn">☰</button>
        <button id="saveCircuitBtn">💾 회로 저장</button>
        <button id="viewSavedBtn">💾 저장된 회로</button>
        <button id="viewRankingBtn">🏆 랭킹</button>
        <button id="showIntroBtn">ℹ️ 스테이지 안내</button>
        <button id="hintBtn">💡 힌트</button>
        <button id="exportGifBtn">📷 회로 내보내기</button>
        <button id="prevStageBtnMenu">← 이전 스테이지</button>
        <button id="nextStageBtnMenu">다음 스테이지 →</button>
        <button id="backToLevelsBtn">← 레벨 선택으로</button>
      </div>
    </div>
    <div id="tutorialModal" class="modal tutorial-modal" style="display:none;">
      <div class="modal-content tutorial-content">
        <h2 id="tutTitle"></h2>
        <!-- 여기 이미지 자리 -->
        <img id="tutImg" class="tutorial-img" src alt="튜토리얼 이미지"
          style="display:none;">
        <p id="tutDesc"></p>
        <div class="tut-controls">
          <button id="tutPrevBtn">이전</button>
          <button id="tutNextBtn">다음</button>
          <button id="tutFinishBtn" style="display:none;">튜토리얼 마치기</button>
          <button id="tutCloseBtn">닫기</button>
        </div>
      </div>
    </div>
    <!-- 저장된 회로 목록 모달 -->
    <div id="savedModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h2 id="savedListTitle">💾 저장된 회로 목록</h2>
        <div id="savedList" class="saved-list"
          style="display:flex; flex-wrap:wrap; gap:10px; max-height:300px; overflow-y:auto;">
          <!-- 여기에 JS로 항목들이 채워집니다 -->
        </div>
        <div style="text-align:right; margin-top:1rem;">
          <button id="closeSavedModal">닫기</button>
        </div>
      </div>
    </div>
    <!-- 문제 목록 모달 -->
    <div id="problemListModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h2 id="problemListTitle">📂 저장된 문제</h2>
        <ul id="problemList" style="list-style:none; padding:0; max-height:300px; overflow-y:auto;"></ul>
        <div style="text-align:right; margin-top:1rem;">
          <button id="closeProblemListModal">닫기</button>
        </div>
      </div>
    </div>
    <!-- GIF 결과 모달 -->
    <div id="gifModal" class="modal" style="display:none;">
      <div class="modal-content">
        <img id="gifPreview" style="max-width:100%; height:60vh;" />
        <div class="modal-buttons" style="margin-top:1rem;">
          <button id="saveGifBtn">이미지 저장</button>
          <button id="copyGifBtn" style="display:none">이미지 복사</button>
          <button id="shareGifBtn">공유하기</button>
          <button id="closeGifModal">닫기</button>
        </div>
      </div>
    </div>
    <div id="toastContainer" class="toast-container" aria-live="polite" aria-atomic="true"></div>
    <div id="clearedModal" class="modal" style="display: none;">
      <div class="modal-content">
        <h2 id="clearedTitle">스테이지 <span id="clearedStageNumber"></span> 클리어!</h2>
        <div id="clearedRanking"></div>
        <div class="modal-buttons">
          <button id="prevStageBtn">이전 스테이지</button>
          <button id="nextStageBtn">다음 스테이지</button>
        </div>
        <button class="closeBtn">&times;</button>
      </div>
    </div>
    <script
      src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script
      src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script
      src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

    <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAbpyXETtBChmh6vKpHCyaqpmPIm-lzAkI",
      authDomain: "bitgame-70394.firebaseapp.com",
      databaseURL: "https://bitgame-70394-default-rtdb.firebaseio.com",
      projectId: "bitgame-70394",
      storageBucket: "bitgame-70394.firebasestorage.app",
      messagingSenderId: "796428704868",
      appId: "1:796428704868:web:6926c5650bec88ee0c1371",
      measurementId: "G-W7KQ98LNST"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
  </script>
    <script src="https://apis.google.com/js/api.js" async defer></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="lang.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.js"></script>
    <script src="background.js"></script>
    <script type="module" src="src/main.js"></script>

    <div id="levelIntroModal" style="display:none" class="modal">
      <div class="modal-content">
        <h2 id="introTitle"></h2>
        <p id="introDesc"></p>
        <div id="truthTableContainer">
          <table id="truthTable" border="1"></table>
        </div>
        <button id="startLevelBtn">시작하기</button>
      </div>
    </div>
    <div id="stageTutorialModal" class="modal" style="display:none;">
      <div class="modal-content">
        <img id="stageTutImg" class="tutorial-img" src="" alt="tutorial">
        <div class="tutorial-text" style="font-size: 1.1rem">
          <p id="stageTutDesc"></p>
          <button id="stageTutBtn" class="main-button">시작하기</button>
        </div>
      </div>
    </div>
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("service-worker.js");
        });
      }
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6190035827461805"
     crossorigin="anonymous"></script>

  </body>
</html>
